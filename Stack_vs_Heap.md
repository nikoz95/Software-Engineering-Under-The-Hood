# ­ЪЈЏ№ИЈ Stack vs Heap Рђћ рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃўрЃА рЃћрЃЋрЃЮрЃџрЃБрЃфрЃўрЃљ

рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃўрЃА рЃЏрЃћрЃюрЃћрЃ»рЃЏрЃћрЃюрЃбрЃў рЃљрЃарЃўрЃА рЃърЃарЃЮрЃњрЃарЃљрЃЏрЃўрЃарЃћрЃЉрЃўрЃА **рЃАрЃљрЃФрЃўрЃарЃЎрЃЋрЃћрЃџрЃў**. рЃАрЃљрЃюрЃљрЃЏ `async/await`, `GC` рЃЊрЃљ рЃЏрЃљрЃдрЃљрЃџрЃў рЃЊрЃЮрЃюрЃўрЃА рЃљрЃЉрЃАрЃбрЃарЃљрЃЦрЃфрЃўрЃћрЃЉрЃљрЃЏрЃЊрЃћ рЃЏрЃўрЃЋрЃљрЃџрЃЌ, рЃБрЃюрЃЊрЃљ рЃњрЃљрЃЋрЃўрЃњрЃЮрЃЌ, **рЃарЃљ рЃ«рЃЊрЃћрЃЉрЃљ RAM-рЃерЃў рЃарЃћрЃљрЃџрЃБрЃарЃљрЃЊ**.

рЃЦрЃЋрЃћрЃЏрЃЮрЃЌ рЃљрЃарЃўрЃА РђърЃўрЃАрЃбрЃЮрЃарЃўрЃБрЃџрЃўРђю рЃюрЃљрЃарЃљрЃбрЃўрЃЋрЃў, рЃЊрЃљ рЃЏрЃћрЃарЃћ Рђћ рЃЎрЃЮрЃюрЃЎрЃарЃћрЃбрЃБрЃџрЃў рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃћрЃЉрЃў, рЃљрЃюрЃљрЃџрЃЮрЃњрЃўрЃћрЃЉрЃў рЃЊрЃљ рЃърЃарЃљрЃЦрЃбрЃўрЃЎрЃБрЃџрЃў рЃАрЃљрЃЋрЃљрЃарЃ»рЃўрЃерЃЮрЃћрЃЉрЃў.

---

## 1. ­ЪЊю рЃЦрЃљрЃЮрЃАрЃўрЃА рЃћрЃърЃЮрЃЦрЃљ Рђћ рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ Heap

рЃарЃЮрЃЊрЃћрЃАрЃљрЃф рЃърЃарЃЮрЃњрЃарЃљрЃЏрЃўрЃарЃћрЃЉрЃљрЃА рЃўрЃгрЃДрЃћрЃЉрЃЊрЃюрЃћрЃю, рЃўрЃДрЃЮ рЃърЃарЃўрЃюрЃфрЃўрЃърЃБрЃџрЃљрЃЊ рЃћрЃарЃЌрЃў рЃЊрЃўрЃЊрЃў рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃўрЃА рЃљрЃарЃћ Рђћ рЃарЃљрЃдрЃљрЃф, рЃарЃљрЃАрЃљрЃф рЃЊрЃдрЃћрЃА л┐ЛђлИл▒л╗лИлилИЛѓлхл╗ЛїлйлЙ `Heap`-рЃА рЃЋрЃћрЃФрЃљрЃ«рЃўрЃЌ.

- **рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃљ 1 Рђћ рЃ«рЃћрЃџрЃўрЃЌ рЃЏрЃћрЃюрЃћрЃ»рЃЏрЃћрЃюрЃбрЃў:** рЃерЃћрЃю рЃЌрЃЋрЃўрЃЌрЃЮрЃю рЃћрЃФрЃћрЃЉрЃЊрЃў рЃЌрЃљрЃЋрЃўрЃАрЃБрЃцрЃљрЃџ рЃљрЃЊрЃњрЃўрЃџрЃА рЃЊрЃљ рЃЌрЃЋрЃўрЃЌрЃЮрЃюрЃЋрЃћ рЃерЃџрЃўрЃЊрЃў (`malloc/free` C-рЃерЃў).
- **Memory Leak:** рЃЌрЃБ `free` рЃЊрЃљрЃњрЃљрЃЋрЃўрЃгрЃДрЃЊрЃљ Рєњ рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃљ РђърЃЪрЃЮрЃюрЃљрЃЋрЃАРђю.
- **Fragmentation:** рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃљ рЃ«рЃЊрЃћрЃЉрЃљ РђърЃЊрЃљрЃфрЃ«рЃарЃўрЃџрЃБрЃџрЃўРђю:
  - рЃ»рЃљрЃЏрЃерЃў рЃЌрЃљрЃЋрЃўрЃАрЃБрЃцрЃљрЃџрЃў рЃљрЃЊрЃњрЃўрЃџрЃў рЃЉрЃћрЃЋрЃарЃўрЃљ,
  - рЃЏрЃљрЃњрЃарЃљрЃЏ **рЃћрЃарЃЌ рЃЊрЃўрЃЊ рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃА** рЃЋрЃћрЃдрЃљрЃа рЃЕрЃљрЃАрЃЋрЃљрЃЋ, рЃарЃљрЃЊрЃњрЃљрЃю рЃБрЃгрЃДрЃЋрЃћрЃбрЃў рЃЉрЃџрЃЮрЃЎрЃў рЃљрЃдрЃљрЃа рЃарЃЕрЃћрЃЉрЃљ.

рЃњрЃџрЃћрЃ«рЃБрЃарЃљрЃЊ: рЃћрЃарЃЌрЃў рЃЊрЃўрЃЊрЃў рЃАрЃљрЃгрЃДрЃЮрЃЉрЃў рЃњрЃљрЃЦрЃЋрЃА, рЃАрЃљрЃЊрЃљрЃф рЃДрЃЋрЃћрЃџрЃљ рЃДрЃЋрЃћрЃџрЃљрЃцрЃћрЃарЃА рЃДрЃарЃўрЃА. рЃЌрЃљрЃЋрЃўрЃЊрЃљрЃю рЃЎрЃљрЃўрЃљ, рЃЏрЃћрЃарЃћ рЃЎрЃў рЃЋрЃћрЃдрЃљрЃа рЃърЃЮрЃБрЃџрЃЮрЃЉ, рЃЋрЃћрЃдрЃљрЃа рЃљрЃџрЃљрЃњрЃћрЃЉ, рЃЋрЃћрЃдрЃљрЃа рЃљрЃЕрЃЮрЃЕрЃћрЃЉ.

---

## 2. ­ЪЈЌ№ИЈ рЃгрЃћрЃАрЃарЃўрЃњрЃўрЃА рЃћрЃърЃЮрЃЦрЃљ Рђћ Stack-рЃўрЃА рЃњрЃљрЃЏрЃЮрЃЕрЃћрЃюрЃљ

рЃЦрЃљрЃЮрЃАрЃўрЃА рЃЏрЃЮрЃАрЃљрЃњрЃЋрЃљрЃарЃћрЃЉрЃџрЃљрЃЊ рЃњрЃљрЃЕрЃюрЃЊрЃљ **Stack** Рђћ рЃФрЃљрЃџрЃўрЃљрЃю рЃАрЃгрЃарЃљрЃцрЃў, рЃърЃљрЃбрЃљрЃарЃљ рЃЊрЃљ рЃАрЃБрЃърЃћрЃа-рЃЮрЃарЃњрЃљрЃюрЃўрЃќрЃћрЃЉрЃБрЃџрЃў рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃљ.

- **Stack Frame (РђърЃљрЃњрЃБрЃарЃўРђю):** рЃДрЃЮрЃЋрЃћрЃџрЃў рЃцрЃБрЃюрЃЦрЃфрЃўрЃўрЃА рЃњрЃљрЃЏрЃЮрЃФрЃљрЃ«рЃћрЃЉрЃўрЃАрЃљрЃА рЃерЃћрЃЏрЃЮрЃЊрЃўрЃА рЃљрЃ«рЃљрЃџрЃў РђърЃљрЃњрЃБрЃарЃўРђю, рЃАрЃљрЃЊрЃљрЃф рЃўрЃюрЃљрЃ«рЃћрЃЉрЃљ:
  - рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў
  - рЃџрЃЮрЃЎрЃљрЃџрЃБрЃарЃў рЃфрЃЋрЃџрЃљрЃЊрЃћрЃЉрЃў
  - рЃЊрЃљрЃЉрЃарЃБрЃюрЃћрЃЉрЃўрЃА рЃЏрЃўрЃАрЃљрЃЏрЃљрЃарЃЌрЃў
- **LIFO рЃърЃарЃўрЃюрЃфрЃўрЃърЃў:** рЃЉрЃЮрЃџрЃЮ рЃерЃћрЃЏрЃЮрЃАрЃБрЃџрЃў рЃърЃўрЃарЃЋрЃћрЃџрЃў рЃњрЃљрЃЊрЃўрЃА Рђћ РђърЃЉрЃЮрЃџрЃЮ рЃљрЃњрЃБрЃарЃАРђю рЃЏрЃЮрЃЋрЃ«рЃАрЃюрЃў, рЃљрЃарЃљ рЃерЃБрЃљрЃерЃљрЃА.
- **рЃџрЃўрЃЏрЃўрЃбрЃў:** рЃАрЃбрЃћрЃЎрЃА рЃ«рЃерЃўрЃарЃљрЃЊ ~1MB рЃњрЃљрЃарЃерЃћрЃЏрЃЮ рЃџрЃўрЃЏрЃўрЃбрЃў рЃљрЃЦрЃЋрЃА (рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃљрЃќрЃћрЃљ рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃў).

### ­Ъћё Recursion vs While Рђћ рЃАрЃбрЃћрЃЎрЃўрЃА рЃЏрЃЮрЃ«рЃЏрЃљрЃарЃћрЃЉрЃљ

```csharp
// РЮї рЃАрЃбрЃћрЃЎрЃўрЃА рЃЏрЃбрЃћрЃарЃў Рђћ рЃБрЃАрЃљрЃАрЃарЃБрЃџрЃЮ рЃарЃћрЃЎрЃБрЃарЃАрЃўрЃљ
void RecursiveMethod(int n)
{
    int x = 10;
    RecursiveMethod(n + 1);  // рЃДрЃЮрЃЋрЃћрЃџ рЃњрЃљрЃЏрЃЮрЃФрЃљрЃ«рЃћрЃЉрЃљрЃќрЃћ рЃљрЃ«рЃљрЃџрЃў Stack Frame
}

// РюЁ рЃАрЃбрЃћрЃЎрЃўрЃАрЃЌрЃЋрЃўрЃА рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮ Рђћ рЃфрЃўрЃЎрЃџрЃў
int i = 0;
while (i < 1_000_000)
{
    int x = 10; // рЃћрЃА рЃфрЃЋрЃџрЃљрЃЊрЃў рЃДрЃЮрЃЋрЃћрЃџ рЃўрЃбрЃћрЃарЃљрЃфрЃўрЃљрЃќрЃћ рЃўрЃЏрЃљрЃЋрЃћ frame-рЃерЃў "рЃфрЃ«рЃЮрЃЋрЃарЃЮрЃЉрЃА"
    i++;
}
```

рЃарЃћрЃЎрЃБрЃарЃАрЃўрЃўрЃЌ рЃАрЃбрЃћрЃЎрЃА рЃљрЃЋрЃАрЃћрЃЉ РђърЃљрЃњрЃБрЃарЃћрЃЉрЃўрЃЌРђю, рЃфрЃўрЃЎрЃџрЃўрЃЌ Рђћ рЃўрЃњрЃўрЃЋрЃћ РђърЃљрЃњрЃБрЃарЃАРђю рЃўрЃДрЃћрЃюрЃћрЃЉ.

---

## 3. ­ЪД▒ Stack vs Heap Рђћ рЃерЃћрЃЊрЃљрЃарЃћрЃЉрЃўрЃЌрЃў рЃАрЃБрЃарЃљрЃЌрЃў

| рЃЏрЃљрЃ«рЃљрЃАрЃўрЃљрЃЌрЃћрЃЉрЃћрЃџрЃў      | Stack (рЃАрЃбрЃћрЃЎрЃў)                 | Heap (рЃ░рЃўрЃърЃў)                          |
|--------------------|-------------------------------|--------------------------------------|
| рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃљ          | рЃгрЃћрЃАрЃарЃўрЃњрЃў, LIFO, РђърЃљрЃњрЃБрЃарЃћрЃЉрЃўРђю      | рЃЦрЃљрЃЮрЃАрЃБрЃарЃў рЃЊрЃўрЃЊрЃў рЃАрЃљрЃгрЃДрЃЮрЃЉрЃў                |
| рЃАрЃўрЃЕрЃЦрЃљрЃарЃћ            | рЃћрЃџрЃЋрЃўрЃАрЃћрЃЉрЃБрЃарЃў                    | рЃерЃћрЃЊрЃљрЃарЃћрЃЉрЃўрЃЌ рЃюрЃћрЃџрЃў                      |
| рЃЏрЃћрЃюрЃћрЃ»рЃЏрЃћрЃюрЃбрЃў         | рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃў (рЃцрЃБрЃюрЃЦрЃфрЃўрЃўрЃА рЃАрЃљрЃќрЃдрЃЋрЃарЃўрЃЌ) | Garbage Collector / рЃ«рЃћрЃџрЃўрЃЌ           |
| рЃарЃљ рЃўрЃюрЃљрЃ«рЃћрЃЉрЃљ рЃ«рЃерЃўрЃарЃљрЃЊ? | Value Types, Pointer-рЃћрЃЉрЃў      | Objects (Reference Types), рЃЊрЃўрЃЊрЃў рЃЏрЃљрЃАрЃўрЃЋрЃћрЃЉрЃў |
| рЃќрЃЮрЃЏрЃљ               | рЃърЃљрЃбрЃљрЃарЃљ рЃџрЃўрЃЏрЃўрЃбрЃў                 | рЃЊрЃўрЃЊрЃўрЃљ, рЃЏрЃљрЃњрЃарЃљрЃЏ рЃцрЃарЃљрЃњрЃЏрЃћрЃюрЃбрЃўрЃарЃЊрЃћрЃЉрЃљ        |

рЃњрЃџрЃћрЃ«рЃБрЃарЃљрЃЊ:
- **Stack** = рЃ»рЃўрЃЉрЃћ (рЃърЃљрЃбрЃљрЃарЃљ, рЃАрЃгрЃарЃљрЃцрЃў, рЃљрЃ«рЃџрЃЮрЃА).
- **Heap** = рЃњрЃљрЃарЃЊрЃћрЃарЃЮрЃЉрЃў/рЃАрЃљрЃгрЃДрЃЮрЃЉрЃў (рЃЊрЃўрЃЊрЃў, рЃюрЃћрЃџрЃў, рЃЏрЃљрЃњрЃарЃљрЃЏ рЃЉрЃћрЃЋрЃарЃў рЃљрЃЊрЃњрЃўрЃџрЃўрЃЌ).

---

## 4. ­Ъњј Struct vs Class Рђћ рЃЎрЃЮрЃЏрЃърЃўрЃџрЃљрЃбрЃЮрЃарЃўрЃА РђърЃ»рЃљрЃЊрЃЮрЃЦрЃарЃЮрЃЉрЃљРђю

**Struct (Value Type):**
- рЃљрЃдрЃўрЃЦрЃЏрЃћрЃЉрЃљ рЃарЃЮрЃњрЃЮрЃарЃф рЃћрЃарЃЌрЃўрЃљрЃюрЃў рЃърЃљрЃбрЃљрЃарЃљ рЃюрЃўрЃЋрЃЌрЃў.
- рЃАрЃљрЃЊрЃљрЃф рЃЊрЃћрЃЋрЃА рЃфрЃЋрЃџрЃљрЃЊрЃў Рђћ рЃўрЃЦрЃЋрЃћ рЃЊрЃћрЃЋрЃА рЃЏрЃўрЃАрЃў рЃарЃћрЃљрЃџрЃБрЃарЃў рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљ (рЃ«рЃерЃўрЃарЃљрЃЊ Stack-рЃќрЃћ рЃљрЃю рЃАрЃ«рЃЋрЃљ value-рЃерЃў рЃЕрЃљрЃДрЃЮрЃџрЃўрЃџрЃў).

**Class (Reference Type):**
- рЃЮрЃарЃљрЃЊ рЃўрЃДрЃЮрЃцрЃљ:
  - рЃърЃБрЃџрЃбрЃў / рЃЉрЃЏрЃБрЃџрЃў (Reference, Pointer) Рђћ Stack-рЃќрЃћ,
  - рЃЌрЃЋрЃўрЃЌрЃЮрЃю рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў Рђћ Heap-рЃќрЃћ.

### Рџа№ИЈ Struct-рЃўрЃА рЃќрЃЮрЃЏрЃљ Рђћ рЃарЃЮрЃЊрЃўрЃА рЃ«рЃЊрЃћрЃЉрЃљ рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃљ?

рЃЌрЃБ `struct` рЃФрЃљрЃџрЃўрЃљрЃю рЃЊрЃўрЃЊрЃўрЃљ (рЃЏрЃљрЃњ. > 16РђЊ32 рЃЉрЃљрЃўрЃбрЃў), рЃЏрЃўрЃАрЃў рЃДрЃЮрЃЋрЃћрЃџрЃў рЃЎрЃЮрЃърЃўрЃарЃћрЃЉрЃљ рЃФрЃЋрЃўрЃарЃЊрЃћрЃЉрЃљ, рЃарЃљрЃЊрЃњрЃљрЃю рЃДрЃЮрЃЋрЃћрЃџрЃў рЃњрЃљрЃЊрЃљрЃфрЃћрЃЏрЃљ рЃюрЃўрЃерЃюрЃљрЃЋрЃА **рЃЏрЃЌрЃћрЃџрЃў рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃўрЃА рЃЊрЃљрЃЎрЃЮрЃърЃўрЃарЃћрЃЉрЃљрЃА**.

```csharp
public struct LargePoint
{
    public long X, Y, Z, A, B;
}

// РЮї рЃюрЃћрЃџрЃўрЃљ Рђћ рЃДрЃЮрЃЋрЃћрЃџ рЃњрЃљрЃЏрЃЮрЃФрЃљрЃ«рЃћрЃЉрЃљрЃќрЃћ рЃЎрЃЮрЃърЃўрЃарЃЊрЃћрЃЉрЃљ рЃЏрЃЌрЃћрЃџрЃў LargePoint
void Process(LargePoint p) { /*...*/ }

// РюЁ рЃАрЃгрЃарЃљрЃцрЃўрЃљ Рђћ рЃњрЃљрЃЊрЃљрЃћрЃфрЃћрЃЏрЃљ рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃЏрЃўрЃАрЃљрЃЏрЃљрЃарЃЌрЃў (read-only reference)
void Process(in LargePoint p) { /*...*/ }
```

рЃърЃарЃљрЃЦрЃбрЃўрЃЎрЃБрЃџрЃў рЃарЃЕрЃћрЃЋрЃљ:
- рЃърЃљрЃбрЃљрЃарЃљ, рЃ«рЃерЃўрЃарЃљрЃЊ рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃБрЃџрЃў рЃбрЃўрЃърЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА (`Point`, `DateTime`) Рєњ `struct` рЃЎрЃљрЃарЃњрЃўрЃљ.
- рЃЊрЃўрЃЊрЃў, рЃарЃЌрЃБрЃџрЃў рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА Рєњ `class` рЃљрЃю `struct` + `in`/`ref` рЃцрЃўрЃЦрЃарЃўрЃљрЃюрЃљрЃЊ.

---

## 5. ­ЪЋх№ИЈ Escape Analysis, Boxing рЃЊрЃљ Generics

### ­ЪД│ Boxing Рђћ рЃарЃЮрЃфрЃљ Value Type рЃ░рЃўрЃърЃќрЃћ РђърЃ«рЃбрЃћрЃЉрЃљРђю

**Boxing** рЃ«рЃЊрЃћрЃЉрЃљ, рЃарЃЮрЃфрЃљ `Value Type` рЃБрЃюрЃЊрЃљ рЃўрЃЦрЃфрЃћрЃА `object`-рЃљрЃЊ рЃљрЃю `interface`-рЃљрЃЊ:

```csharp
int x = 42;
object o = x; // РЮї Boxing Рђћ x рЃњрЃљрЃЊрЃљрЃЊрЃўрЃА Heap-рЃќрЃћ рЃДрЃБрЃЌрЃерЃў
```

рЃћрЃА рЃюрЃўрЃерЃюрЃљрЃЋрЃА:
- рЃўрЃЦрЃЏрЃюрЃћрЃЉрЃљ рЃљрЃ«рЃљрЃџрЃў рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў Heap-рЃќрЃћ,
- рЃАрЃбрЃћрЃЎрЃБрЃарЃў рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљ рЃЎрЃЮрЃърЃўрЃарЃЊрЃћрЃЉрЃљ рЃерЃўрЃњрЃюрЃўрЃЌ,
- GC-рЃА рЃЏрЃћрЃбрЃў рЃАрЃљрЃЦрЃЏрЃћ рЃћрЃЏрЃљрЃбрЃћрЃЉрЃљ.

### ­ЪДг Generics Рђћ рЃарЃЮрЃњрЃЮрЃа рЃњрЃЋрЃљрЃюрЃљрЃ«рЃЋрЃћрЃЋрЃА Boxing-рЃА

```csharp
var list = new List<int>(); // РюЁ int рЃљрЃЦ рЃљрЃа рЃЉрЃЮрЃЦрЃАрЃЊрЃћрЃЉрЃљ
```

`List<int>` рЃљрЃарЃўрЃА `class`, рЃљрЃЏрЃўрЃбрЃЮрЃЏ рЃЏрЃўрЃАрЃў рЃерЃўрЃЊрЃљ рЃЏрЃљрЃАрЃўрЃЋрЃў Heap-рЃќрЃћрЃљ, рЃЏрЃљрЃњрЃарЃљрЃЏ `int`-рЃћрЃЉрЃў рЃерЃўрЃњрЃюрЃўрЃЌ **рЃБрЃЉрЃарЃљрЃџрЃЮрЃЊ raw рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃћрЃЉрЃљрЃЊ** рЃўрЃюрЃљрЃ«рЃћрЃЉрЃљ, рЃљрЃарЃљ рЃарЃЮрЃњрЃЮрЃарЃф `object`.

рЃњрЃџрЃћрЃ«рЃБрЃарЃљрЃЊ: `Boxing` = рЃърЃљрЃбрЃљрЃарЃљ рЃюрЃўрЃЋрЃЌрЃўрЃА рЃАрЃЦрЃћрЃџ рЃДрЃБрЃЌрЃерЃў рЃЕрЃљрЃАрЃЏрЃљ, рЃарЃЮрЃЏ рЃДрЃЋрЃћрЃџрЃњрЃљрЃю рЃћрЃарЃЌрЃюрЃљрЃўрЃарЃљрЃЊ РђърЃЕрЃљрЃћрЃбрЃўрЃЮрЃАРђю. Generics Рєњ рЃДрЃБрЃЌрЃў рЃўрЃЏ рЃбрЃўрЃърЃўрЃАрЃЌрЃЋрЃўрЃА рЃЏрЃЮрЃўрЃГрЃћрЃарЃљ, рЃарЃљрЃф рЃњрЃГрЃўрЃарЃЊрЃћрЃЉрЃљ, рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃўрЃЌрЃў рЃДрЃБрЃЌрЃў рЃљрЃдрЃљрЃа рЃњрЃГрЃўрЃарЃЊрЃћрЃЉрЃљ.

---

## 6. ­Ъїі Streams Рђћ рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃўрЃА РђърЃњрЃљрЃЏрЃбрЃљрЃарЃў рЃЏрЃўрЃџрЃћрЃЉрЃўРђю

`Stream`-рЃћрЃЉрЃў рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃљрЃА рЃњрЃљрЃФрЃџрЃћрЃЋрЃА рЃўрЃЏрЃБрЃерЃљрЃЮ **рЃњрЃўрЃњрЃљрЃЉрЃљрЃўрЃбрЃўрЃљрЃю рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃЌрЃљрЃю** рЃўрЃАрЃћ, рЃарЃЮрЃЏ рЃћрЃарЃЌрЃЉрЃљрЃерЃљрЃЊ RAM-рЃерЃў рЃљрЃа рЃЕрЃљрЃбрЃћрЃюрЃЮ.

```csharp
// РЮї рЃЎрЃљрЃбрЃљрЃАрЃбрЃарЃЮрЃцрЃљ Рђћ рЃДрЃЋрЃћрЃџрЃљрЃцрЃћрЃарЃў RAM-рЃерЃў, рЃњрЃљрЃюрЃАрЃљрЃЎрЃБрЃЌрЃарЃћрЃЉрЃўрЃЌ рЃЊрЃўрЃЊрЃў рЃцрЃљрЃўрЃџрЃўрЃА рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃљрЃерЃў
byte[] data = stream.ToArray();

// РюЁ рЃАрЃгрЃЮрЃарЃў рЃЏрЃўрЃЊрЃњрЃЮрЃЏрЃљ Рђћ рЃЏрЃБрЃерЃљрЃЮрЃЉрЃљ рЃЉрЃБрЃцрЃћрЃарЃћрЃЉрЃўрЃЌ
await fileStream.CopyToAsync(networkStream);
```

рЃњрЃџрЃћрЃ«рЃБрЃарЃљрЃЊ: 
- `ToArray()` = рЃЏрЃЌрЃћрЃџрЃў рЃЏрЃЊрЃўрЃюрЃљрЃарЃўрЃА рЃЏрЃљрЃдрЃџрЃљ рЃљрЃдрЃЎрЃЋрЃћрЃЌрЃљ рЃЊрЃљ рЃљрЃЉрЃљрЃюрЃЮрЃерЃў рЃњрЃљрЃЊрЃљрЃдрЃЋрЃарЃљ.
- `CopyToAsync` = рЃЏрЃўрЃџрЃў, рЃарЃЮрЃЏрЃћрЃџрЃАрЃљрЃф рЃгрЃДрЃљрЃџрЃў рЃюрЃћрЃџрЃљ, рЃюрЃљрЃЎрЃљрЃЊрЃћрЃЉрЃљрЃЊ рЃЏрЃўрЃљрЃЦрЃЋрЃА.

---

## 7. ­ЪљІ LOH (Large Object Heap) рЃЊрЃљ рЃцрЃарЃљрЃњрЃЏрЃћрЃюрЃбрЃљрЃфрЃўрЃљ

рЃЌрЃБ рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў **85,000 рЃЉрЃљрЃўрЃбрЃќрЃћ рЃЊрЃўрЃЊрЃўрЃљ**, рЃўрЃА рЃ«рЃЋрЃЊрЃћрЃЉрЃљ **LOH**-рЃерЃў (Large Object Heap).

- GC рЃљрЃЏ рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃА рЃЕрЃЋрЃћрЃБрЃџрЃћрЃЉрЃарЃўрЃЋ **рЃљрЃа рЃљрЃЕрЃЮрЃЕрЃћрЃЉрЃА** (рЃљрЃа рЃљрЃЎрЃЮрЃЏрЃърЃљрЃЦрЃбрЃћрЃЉрЃА),
- рЃерЃћрЃЊрЃћрЃњрЃљрЃЊ, рЃЊрЃарЃЮрЃўрЃА рЃњрЃљрЃюрЃЏрЃљрЃЋрЃџрЃЮрЃЉрЃљрЃерЃў рЃўрЃЦ рЃЕрЃюрЃЊрЃћрЃЉрЃљ рЃцрЃарЃљрЃњрЃЏрЃћрЃюрЃбрЃљрЃфрЃўрЃљ,
- рЃЊрЃўрЃЊрЃў рЃЌрЃљрЃЋрЃўрЃАрЃБрЃцрЃљрЃџрЃў рЃБрЃгрЃДрЃЋрЃћрЃбрЃў рЃЉрЃџрЃЮрЃЎрЃўрЃА рЃърЃЮрЃЋрЃюрЃљ рЃарЃЌрЃБрЃџрЃЊрЃћрЃЉрЃљ.

### ­ЪЏа№ИЈ рЃњрЃљрЃЏрЃЮрЃАрЃљрЃЋрЃљрЃџрЃў Рђћ Pooling / ArrayPool

```csharp
using System.Buffers;

// рЃЋрЃўрЃЌрЃ«рЃЮрЃЋрЃЌ рЃЏрЃљрЃАрЃўрЃЋрЃА рЃљрЃБрЃќрЃўрЃЊрЃљрЃю
byte[] buffer = ArrayPool<byte>.Shared.Rent(90_000);

try
{
    // рЃЏрЃБрЃерЃљрЃЮрЃЉрЃљ buffer-рЃЌрЃљрЃю
}
finally
{
    // рЃЋрЃљрЃЉрЃарЃБрЃюрЃћрЃЉрЃЌ рЃБрЃЎрЃљрЃю рЃљрЃБрЃќрЃерЃў
    ArrayPool<byte>.Shared.Return(buffer);
}
```

рЃўрЃЦрЃюрЃћрЃЉ рЃЏрЃЮрЃАрЃгрЃарЃћрЃЉрЃА GC-рЃА рЃюрЃљрЃЎрЃџрЃћрЃЉрЃў рЃЊрЃўрЃЊрЃў рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљрЃА рЃЊрЃљ LOH рЃюрЃљрЃЎрЃџрЃћрЃЉрЃљрЃЊ рЃцрЃарЃљрЃњрЃЏрЃћрЃюрЃбрЃўрЃарЃЊрЃћрЃЉрЃљ.

---

## 8. ­ЪДф рЃърЃарЃљрЃЦрЃбрЃўрЃЎрЃБрЃџрЃў рЃАрЃљрЃЋрЃљрЃарЃ»рЃўрЃерЃЮрЃћрЃЉрЃў

### ­ЪДф рЃАрЃљрЃЋрЃљрЃарЃ»рЃўрЃерЃЮ 1 Рђћ Stack Overflow рЃАрЃўрЃЏрЃБрЃџрЃљрЃфрЃўрЃљ

- рЃЊрЃљрЃгрЃћрЃарЃћ рЃарЃћрЃЎрЃБрЃарЃАрЃўрЃБрЃџрЃў рЃЏрЃћрЃЌрЃЮрЃЊрЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф:
  - рЃўрЃдрЃћрЃЉрЃА `int n`-рЃА,
  - рЃЉрЃћрЃГрЃЊрЃљрЃЋрЃА `n`-рЃА,
  - рЃўрЃФрЃљрЃ«рЃћрЃЉрЃА рЃАрЃљрЃЎрЃБрЃЌрЃљрЃа рЃЌрЃљрЃЋрЃА `n + 1`-рЃўрЃЌ.
- рЃњрЃљрЃБрЃерЃЋрЃў `Release` рЃарЃћрЃЪрЃўрЃЏрЃерЃў рЃЊрЃљ рЃюрЃљрЃ«рЃћ, рЃарЃЮрЃЊрЃўрЃА рЃЏрЃўрЃўрЃдрЃћрЃЉ `StackOverflowException`-рЃА.

**рЃњрЃљрЃцрЃўрЃЦрЃарЃћрЃЉрЃљ:** рЃарЃљ рЃЏрЃЮрЃ«рЃЊрЃћрЃЉрЃЮрЃЊрЃљ, рЃўрЃњрЃўрЃЋрЃћ рЃџрЃЮрЃњрЃўрЃЎрЃљ `while` рЃфрЃўрЃЎрЃџрЃўрЃЌ рЃарЃЮрЃЏ рЃЊрЃљрЃњрЃћрЃгрЃћрЃарЃљ?

### ­ЪДф рЃАрЃљрЃЋрЃљрЃарЃ»рЃўрЃерЃЮ 2 Рђћ Boxing-рЃўрЃА рЃърЃЮрЃЋрЃюрЃљ

- рЃЊрЃљрЃгрЃћрЃарЃћ рЃърЃљрЃбрЃљрЃарЃљ рЃЎрЃЮрЃюрЃАрЃЮрЃџрЃБрЃарЃў рЃљрЃърЃў, рЃАрЃљрЃЊрЃљрЃф:
  - рЃњрЃљрЃЦрЃЋрЃА `object[]` рЃЏрЃљрЃАрЃўрЃЋрЃў,
  - рЃерЃўрЃњрЃюрЃўрЃЌ рЃЕрЃљрЃДрЃарЃў `int`, `double` рЃЊрЃљ `string` рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃћрЃЉрЃА.
- рЃњрЃљрЃБрЃерЃЋрЃў **BenchmarkDotNet**-рЃўрЃЌ рЃЊрЃљ рЃЕрЃљрЃарЃЌрЃћ `MemoryDiagnoser`:
  - рЃюрЃљрЃ«рЃћ, рЃарЃљрЃЏрЃЊрЃћрЃюрЃў рЃљрЃџрЃЮрЃЎрЃљрЃфрЃўрЃљ рЃ«рЃЊрЃћрЃЉрЃљ,
  - рЃАрЃфрЃљрЃЊрЃћ Generics рЃЋрЃљрЃарЃўрЃљрЃюрЃбрЃў (`List<int>`) рЃЊрЃљ рЃерЃћрЃљрЃЊрЃљрЃарЃћ.

### ­ЪДф рЃАрЃљрЃЋрЃљрЃарЃ»рЃўрЃерЃЮ 3 Рђћ Stream vs ToArray

- рЃљрЃўрЃдрЃћ рЃЊрЃўрЃЊрЃў рЃцрЃљрЃўрЃџрЃў (рЃЏрЃљрЃњ. 200MB).
- рЃЊрЃљрЃгрЃћрЃарЃћ рЃЮрЃарЃў рЃЏрЃћрЃЌрЃЮрЃЊрЃў:
  1. рЃЎрЃўрЃЌрЃ«рЃБрЃџрЃЮрЃЉрЃА рЃцрЃљрЃўрЃџрЃА `File.ReadAllBytes` + рЃљрЃЏрЃБрЃерЃљрЃЋрЃћрЃЉрЃА.
  2. рЃЎрЃўрЃЌрЃ«рЃБрЃџрЃЮрЃЉрЃА `FileStream` + `CopyToAsync`/`ReadAsync` рЃЉрЃБрЃцрЃћрЃарЃћрЃЉрЃўрЃЌ.
- рЃЊрЃљрЃљрЃЎрЃЋрЃўрЃарЃЊрЃў:
  - RAM рЃЏрЃЮрЃ«рЃЏрЃљрЃарЃћрЃЉрЃљрЃА,
  - CPU рЃЊрЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃљрЃА,
  - GC рЃърЃљрЃБрЃќрЃћрЃЉрЃА (Performance profiler-рЃўрЃЌ).

---

## 9. ­ЪЕ║ рЃўрЃюрЃАрЃбрЃарЃБрЃЏрЃћрЃюрЃбрЃћрЃЉрЃў рЃЊрЃўрЃљрЃњрЃюрЃЮрЃАрЃбрЃўрЃЎрЃўрЃАрЃЌрЃЋрЃўрЃА

- **`sizeof(T)`** Рђћ рЃбрЃўрЃърЃўрЃА рЃќрЃЮрЃЏрЃўрЃА рЃњрЃљрЃАрЃљрЃњрЃћрЃЉрЃљрЃЊ (unsafe рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃерЃў рЃљрЃю рЃАрЃърЃћрЃфрЃўрЃљрЃџрЃБрЃарЃў рЃърЃўрЃарЃЮрЃЉрЃћрЃЉрЃўрЃЌ).
- **BenchmarkDotNet** Рђћ `MemoryDiagnoser` рЃљрЃбрЃарЃўрЃЉрЃБрЃбрЃўрЃЌ:
  - рЃюрЃљрЃ«рЃљрЃЋ, рЃарЃљ рЃарЃљрЃЏрЃЊрЃћрЃю рЃљрЃџрЃЮрЃЎрЃљрЃфрЃўрЃљрЃА рЃљрЃЎрЃћрЃЌрЃћрЃЉрЃА.
- **dotMemory / PerfView / dotnet-trace** Рђћ рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃўрЃА рЃърЃарЃЮрЃцрЃўрЃџрЃўрЃюрЃњрЃў, `Traffic View`, `Backtraces`.
- **`GC.GetTotalMemory` / GC Counters** Рђћ рЃарЃљрЃЏрЃЊрЃћрЃюрЃў рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃљ рЃЊрЃљ рЃарЃљ рЃАрЃўрЃ«рЃерЃўрЃарЃўрЃЌ рЃўрЃгрЃЏрЃўрЃюрЃЊрЃћрЃЉрЃљ.

рЃњрЃџрЃћрЃ«рЃБрЃарЃљрЃЊ: profiler-рЃћрЃЉрЃў рЃљрЃарЃўрЃА РђърЃћрЃЦрЃЮрЃАрЃЎрЃЮрЃърЃўрЃљРђю рЃерЃћрЃюрЃў рЃљрЃърЃџрЃўрЃЎрЃљрЃфрЃўрЃўрЃАрЃЌрЃЋрЃўрЃА Рђћ рЃюрЃљрЃ«рЃБрЃџрЃЮрЃЉ, рЃАрЃљрЃЊ РђърЃЪрЃЮрЃюрЃљрЃЋрЃАРђю рЃЊрЃљ рЃАрЃљрЃЊ РђърЃўрЃГрЃћрЃЊрЃћрЃЉрЃљРђю.

---

## 10. ­ЪДЕ рЃърЃљрЃбрЃљрЃарЃљ РђърЃЕрЃћрЃЎрЃџрЃўрЃАрЃбрЃўРђю рЃДрЃЮрЃЋрЃћрЃџрЃЊрЃдрЃўрЃБрЃарЃў рЃЎрЃЮрЃЊрЃўрЃАрЃЌрЃЋрЃўрЃА

- **Value Types рЃЊрЃўрЃЊрЃў рЃљрЃа рЃњрЃљрЃњрЃўрЃЋрЃўрЃЊрЃћрЃА:** рЃЌрЃБ `struct` рЃФрЃљрЃџрЃўрЃљрЃю рЃЊрЃўрЃЊрЃўрЃљ Рєњ рЃЊрЃљрЃцрЃўрЃЦрЃарЃЊрЃў, рЃюрЃљрЃЏрЃЊрЃЋрЃўрЃџрЃљрЃЊ рЃњрЃГрЃўрЃарЃЊрЃћрЃЉрЃљ?
- **Boxing-рЃА рЃћрЃарЃўрЃЊрЃћ:** рЃюрЃБ рЃљрЃгрЃЋрЃЊрЃў `int`-рЃћрЃЉрЃА `object`-рЃћрЃЉрЃљрЃЊ рЃБрЃљрЃќрЃарЃЮрЃЊ.
- **Streams-рЃА рЃўрЃДрЃћрЃюрЃћрЃЉ:** рЃЊрЃўрЃЊрЃў рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃў = рЃюрЃљрЃЎрЃљрЃЊрЃћрЃЉрЃў, рЃљрЃарЃљ `ToArray()`.
- **рЃЊрЃўрЃЊрЃў рЃЏрЃљрЃАрЃўрЃЋрЃћрЃЉрЃў:** рЃЊрЃљрЃцрЃўрЃЦрЃарЃЊрЃў `ArrayPool` рЃљрЃю рЃАрЃ«рЃЋрЃљ pooling-рЃќрЃћ.
- **Stack-рЃА рЃљрЃа РђърЃЎрЃџрЃљрЃЋРђю:** рЃЌрЃљрЃЋрЃўрЃЊрЃљрЃю рЃљрЃўрЃфрЃўрЃџрЃћ рЃдрЃарЃЏрЃљ/рЃБрЃАрЃљрЃАрЃарЃБрЃџрЃЮ рЃарЃћрЃЎрЃБрЃарЃАрЃўрЃљ рЃўрЃЦ, рЃАрЃљрЃЊрЃљрЃф рЃфрЃўрЃЎрЃџрЃў рЃАрЃљрЃЎрЃЏрЃљрЃарЃўрЃАрЃўрЃљ.

рЃЌрЃБ рЃћрЃА рЃАрЃБрЃарЃљрЃЌрЃў рЃЎрЃљрЃарЃњрЃљрЃЊ РђърЃњрЃўрЃ»рЃЊрЃћрЃЉрЃљ рЃЌрЃљрЃЋрЃерЃўРђю, рЃерЃћрЃњрЃЋрЃўрЃФрЃџрЃўрЃљ рЃерЃћрЃЏрЃЊрЃћрЃњ рЃњрЃљрЃЊрЃљрЃЋрЃљрЃџрЃЌ рЃЏрЃћрЃбрЃў рЃўрЃюрЃцрЃарЃљрЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃБрЃџрЃў рЃЌрЃћрЃЏрЃћрЃЉрЃќрЃћ (Pods, Scaling, GC tuning рЃЊрЃљ рЃљ.рЃе.).

рЃњрЃџрЃћрЃ«рЃБрЃарЃљрЃЊ рЃЊрЃљрЃАрЃљрЃАрЃарЃБрЃџрЃў:  
**рЃ»рЃўрЃЉрЃћрЃА (Stack) рЃњрЃљрЃБрЃцрЃарЃЌрЃ«рЃўрЃџрЃЊрЃў, рЃАрЃљрЃгрЃДрЃЮрЃЉрЃА (Heap) рЃюрЃБ рЃњрЃљрЃЊрЃљрЃљрЃЋрЃАрЃћрЃЉ рЃЊрЃљ рЃгрЃДрЃџрЃўрЃА рЃЏрЃўрЃџрЃўрЃЌ (Stream) рЃљрЃбрЃљрЃарЃћ рЃДрЃЋрЃћрЃџрЃљрЃцрЃћрЃарЃў, рЃарЃљрЃАрЃљрЃф рЃљрЃЉрЃљрЃюрЃЮрЃерЃў рЃњрЃљрЃЊрЃљрЃдрЃЋрЃарЃљрЃА рЃљрЃърЃўрЃарЃћрЃЉ.** ­ЪЈє